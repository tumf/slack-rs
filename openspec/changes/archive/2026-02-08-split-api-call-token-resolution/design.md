# 設計メモ: API 呼び出し時トークン解決の分離

## 方針
- `run_api_call` から「解決」「取得」「フォールバック」の段階を抽出する。
- 分離後も外部仕様は不変に保つ。

## 分離対象
- トークンタイプ解決（CLI 指定 > profile 既定 > 推論）
- トークンキー選択（bot/user）
- token store 取得失敗時の挙動（`SLACK_TOKEN`、明示指定時エラー、user->bot フォールバック）

## 検証方針
- 既存統合テストに加え、トークン解決専用ユニットテストを追加して分岐網羅を強化する。
- 外部依存は mock/fixture で代替し、認証情報なしで検証可能とする。
