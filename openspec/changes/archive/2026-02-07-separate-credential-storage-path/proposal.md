# 提案: 認証情報の保存先を設定ディレクトリから分離する

## 概要
現在の `FileTokenStore` は認証情報を `~/.config/slack-rs/tokens.json` に保存している。設定ファイルと同一ディレクトリに秘匿情報があると、設定を Git 管理している運用で誤コミットのリスクが上がる。本提案では、認証情報のデフォルト保存先を設定ディレクトリから分離し、データ領域へ移す。

## 背景
- 認証情報（token / OAuth client secret）は設定ファイルより厳格に分離管理すべき
- `~/.config` 配下をバックアップ・同期・管理対象にしている運用があり、秘匿情報混在は事故要因になる
- 現在の仕様と実装は `~/.config/slack-rs/tokens.json` を前提としており、分離方針を明確化する必要がある

## 目的
- 認証情報のデフォルト保存先を設定ディレクトリから分離する
- 既存ユーザーが破壊的変更なく移行できるよう、旧パスからの自動移行を定義する
- 既存のキー形式・環境変数オーバーライドを維持し、利用者影響を最小化する

## 非目的
- トークンの暗号化方式変更
- 認証情報のキー形式変更
- `profiles.json` など非機密設定ファイルの保存先変更

## 提案内容
- `FileTokenStore` のデフォルト保存先を `~/.local/share/slack-rs/tokens.json` に変更する
- 環境変数 `SLACK_RS_TOKENS_PATH` がある場合は従来どおり最優先で使用する
- 新パスが未作成で旧パス `~/.config/slack-rs/tokens.json` が存在する場合、初期化時に新パスへ移行する
- Unix では新パスの `tokens.json` に 0600 を適用する
- 既存のキー形式（`{team_id}:{user_id}`、`oauth-client-secret:{profile_name}`）は変更しない

## 期待効果
- 設定ファイル管理と認証情報管理の責務分離が明確になる
- 認証情報の誤コミット・誤配布リスクを低減できる
- 既存利用者は自動移行により影響を最小化できる
